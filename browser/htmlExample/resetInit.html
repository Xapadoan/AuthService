<!DOCTYPE html>
<html>
  <head>
    <title>Reset</title>
  </head>
  <body>
    <div id="notification-box"></div>
    <form>
      <label for="email-input">Email: </label>
      <input id="email-input" type="email" />
      <button id="email-submit">OK</button>
    </form>
    <script async defer type="module">
      import { initReset } from '../src'

      const emailSubmitButton = document.getElementById('email-submit');
      const emailInput = document.getElementById('email-input')
      const notificationBox = document.getElementById('notification-box')

      emailSubmitButton.onclick = (e) => {
        e.preventDefault();
        initReset('http://localhost:8081/auth/reset/init', emailInput.value).then(({ uploadUrl }) => {
          console.log('OK, uploadURL: ', uploadUrl)
          localStorage.setItem('resetUploadUrl', uploadUrl);
          notificationBox.innerText = 'You we receive an email containing a link to reset your id card'
        }).catch(() => {
          notificationBox.innerText = 'Oops, an error ocurred'
        })
      }
    </script>
  </body>
</html>